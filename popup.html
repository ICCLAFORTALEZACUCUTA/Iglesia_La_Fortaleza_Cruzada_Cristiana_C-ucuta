<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popup de Sedes</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* --- ESTILOS DEL MODAL (POPUP FLOTANTE) --- */
        /* El overlay cubre toda la pantalla y oculta el contenido detrás */
        .modal-overlay {
            display: none; /* Oculto por defecto, se cambia a 'flex' con JS */
            position: fixed; /* Fijo en la pantalla */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6); /* Fondo semi-transparente oscuro */
            justify-content: center;
            align-items: center;
            z-index: 1000; /* Asegura que esté por encima de todo lo demás */
            animation: fadeIn 0.3s ease-out forwards; /* Animación de aparición */
        }

        /* El contenido real del modal */
        .modal-content {
            background-color: #ffffff; /* Color de fondo del modal */
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 800px; /* Ancho máximo para el modal */
            position: relative;
            transform: translateY(-20px); /* Para la animación de entrada */
            animation: slideIn 0.4s ease-out forwards; /* Animación de entrada */
            display: flex;
            flex-direction: column;
            max-height: 90vh; /* Limita la altura del modal */
            overflow-y: auto; /* Permite desplazamiento si el contenido es largo */
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            margin: 0;
            color: #007bff; /* Color para el título del modal */
            font-size: 1.8em;
            font-weight: 500;
        }

        .close-button {
            background: none;
            border: none;
            font-size: 2em;
            color: #666;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-button:hover {
            color: #333;
        }

        /* --- ESTILOS DEL SELECTOR Y LA LISTA DE IGLESIAS DENTRO DEL MODAL --- */
        /* Asegúrate de que todos los selectores dentro de .modal-content usen este prefijo */
        .modal-content .form-group {
            margin-bottom: 25px;
            text-align: center;
        }

        .modal-content .form-group label {
            display: block;
            margin-bottom: 10px;
            font-size: 1.1em;
            font-weight: 500;
            color: #555;
        }

        .modal-content .dropdown {
            width: 80%;
            padding: 10px 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1em;
            color: #333;
            background-color: #f9f9f9;
            cursor: pointer;
            transition: border-color 0.3s ease;
            box-sizing: border-box; /* Importante para el width */
        }

        .modal-content .dropdown:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.2);
        }

        .modal-content .churches-list {
            margin-top: 20px;
        }

        .modal-content .church-details {
            display: none; /* Oculto por defecto */
            background-color: #fdfdfd;
            border: 1px solid #e9e9e9;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            animation: fadeInSede 0.5s ease-out forwards; /* Animación de aparición de sede */
        }

        .modal-content .church-details.active {
            display: block; /* Solo la sede activa se muestra */
        }

        .modal-content .church-name {
            color: #0056b3; /* Un azul más oscuro */
            font-size: 1.6em;
            font-weight: 600;
            margin-top: 0;
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        .modal-content .detail-item {
            margin-bottom: 8px;
            display: flex;
            align-items: baseline;
        }
        .modal-content .detail-item strong {
            color: #666;
            min-width: 80px; /* Alinea las etiquetas */
            font-weight: 500;
            margin-right: 10px;
        }
        .modal-content .detail-item p, .modal-content .detail-item a {
            flex-grow: 1;
            margin: 0;
            color: #444;
        }
        .modal-content .detail-item a {
            color: #007bff;
            text-decoration: none;
        }
        .modal-content .detail-item a:hover {
            text-decoration: underline;
        }

        .modal-content .map-embed {
            margin-top: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
        }
        .modal-content .map-embed iframe {
            width: 100%;
            height: 250px; /* Altura fija para los mapas */
            display: block;
            border: none;
        }

        /* --- ANIMACIONES CSS --- */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fadeInSede {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- RESPONSIVIDAD --- */
        @media (max-width: 768px) {
            .modal-content {
                width: 95%;
                padding: 20px;
            }
            .modal-header h2 {
                font-size: 1.5em;
            }
            .modal-content .dropdown {
                width: 95%;
            }
            .modal-content .church-name {
                font-size: 1.4em;
            }
            .modal-content .detail-item strong {
                min-width: 60px;
            }
        }
    </style>
</head>
<body>

    <div id="churchModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Nuestras Sedes en Norte de Santander</h2>
                <button class="close-button">×</button>
            </div>

            <div class="form-group">
                <label for="sede-selector">Selecciona una Sede:</label>
                <select id="sede-selector" class="dropdown">
                    </select>
            </div>

            <div class="churches-list" id="churches-container">
                <div class="church-details" data-id="aeropuerto">
                    <h3 class="church-name">Centro Cristiano Aeropuerto</h3>
                    <div class="detail-item"><p><strong>Pastor(es):</strong> Leonardo Guerrero<br>Mary Guerrero</p></div>
                    <div class="detail-item"><p><strong>Dirección:</strong> Calle 14 Nº 1-116, Barrio El Porvenir Bajo</p></div>
                    <div class="detail-item"><p><strong>Ciudad:</strong> Cúcuta</p></div>
                    <div class="detail-item"><p><strong>Teléfono:</strong> +57 318 4655335</p></div>
                    <div class="detail-item"><p><strong>Sitio web:</strong> <a href="https://www.facebook.com/centrocristiano.aeropuerto" target="_blank">facebook.com/centrocristiano.aeropuerto</a></p></div>
                    <div class="map-embed">
                        <iframe src="http://googleusercontent.com/maps.google.com/1" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>

                <div class="church-details" data-id="lospinos">
                    <h3 class="church-name">Centro Cristiano Los Pinos</h3>
                    <div class="detail-item"><p><strong>Pastor(es):</strong> Juan y María Pérez</p></div>
                    <div class="detail-item"><p><strong>Dirección:</strong> Calle Falsa 123, Barrio El Pino</p></div>
                    <div class="detail-item"><p><strong>Ciudad:</b> Cúcuta</p></div>
                    <div class="detail-item"><p><strong>Teléfono:</strong> +57 300 123 4567</p></div>
                    <div class="detail-item"><p><strong>Sitio web:</strong> <a href="https://www.ejemplo.com/lospinos" target="_blank">www.ejemplo.com/lospinos</a></p></div>
                    <div class="map-embed">
                        <iframe src="http://googleusercontent.com/maps.google.com/2" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>

                <div class="church-details" data-id="atalaya">
                    <h3 class="church-name">Centro Cristiano Atalaya</h3>
                    <div class="detail-item"><p><strong>Pastor(es):</strong> Carlos y Ana Gómez</p></div>
                    <div class="detail-item"><p><strong>Dirección:</strong> Avenida Siempre Viva 456, Atalaya</p></div>
                    <div class="detail-item"><p><strong>Ciudad:</strong> Cúcuta</p></div>
                    <div class="detail-item"><p><strong>Teléfono:</strong> +57 310 987 6543</p></div>
                    <div class="detail-item"><p><strong>Sitio web:</strong> <a href="https://www.ejemplo.com/atalaya" target="_blank">www.ejemplo.com/atalaya</a></p></div>
                    <div class="map-embed">
                        <iframe src="http://googleusercontent.com/maps.google.com/3" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>

                <div class="church-details" data-id="belen">
                    <h3 class="church-name">Centro Cristiano Belén</h3>
                    <div class="detail-item"><p><strong>Pastor(es):</strong> David y Sara Rodríguez</p></div>
                    <div class="detail-item"><p><strong>Dirección:</strong> Calle 20 #15-30, Belén</p></div>
                    <div class="detail-item"><p><strong>Ciudad:</strong> Cúcuta</p></div>
                    <div class="detail-item"><p><strong>Teléfono:</strong> +57 320 111 2233</p></div>
                    <div class="detail-item"><p><strong>Sitio web:</strong> <a href="https://www.ejemplo.com/belen" target="_blank">www.ejemplo.com/belen</a></p></div>
                    <div class="map-embed">
                        <iframe src="https://maps.google.com/maps?ll=7.936351,-72.506283&z=16.3685&t=m&hl=es-ES&gl=US&mapclient=apiv3" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>

                <div class="church-details" data-id="colinas">
                    <h3 class="church-name">Centro Cristiano Colinas</h3>
                    <div class="detail-item"><p><strong>Pastor(es):</strong> Pastor y Pastora Flores</p></div>
                    <div class="detail-item"><p><strong>Dirección:</strong> Vereda Colinas, Vía a San Faustino</p></div>
                    <div class="detail-item"><p><strong>Ciudad:</strong> Cúcuta</p></div>
                    <div class="detail-item"><p><strong>Teléfono:</strong> +57 315 444 5566</p></div>
                    <div class="detail-item"><p><strong>Sitio web:</strong> <a href="https://www.ejemplo.com/colinas" target="_blank">www.ejemplo.com/colinas</a></p></div>
                    <div class="map-embed">
                        <iframe src="https://maps.google.com/?cid=13905543142014950199&g_mp=Cidnb29nbGUubWFwcy5wbGFjZXMudjEuUGxhY2VzLlNlYXJjaFRleHQ" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>

                 <div class="church-details" data-id="donanidia">
                    <h3 class="church-name">Centro Cristiano Doña Nidia</h3>
                    <div class="detail-item"><p><strong>Pastor(es):</strong> Ana y Pedro Pardo</p></div>
                    <div class="detail-item"><p><strong>Dirección:</strong> Calle 23 #8-45, Doña Nidia</p></div>
                    <div class="detail-item"><p><strong>Ciudad:</strong> Cúcuta</p></div>
                    <div class="detail-item"><p><strong>Teléfono:</strong> +57 317 777 8899</p></div>
                    <div class="detail-item"><p><strong>Sitio web:</strong> <a href="https://www.ejemplo.com/donanidia" target="_blank">www.ejemplo.com/donanidia</a></p></div>
                    <div class="map-embed">
                        <iframe src="https://www.google.com/maps/embed/v1/place?q=place_id:ChIJFcp6RrFaZo4RN5urHNBp-sA&key=TU_API_KEY" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>

                <div class="church-details" data-id="libertad">
                    <h3 class="church-name">Centro Cristiano Libertad</h3>
                    <div class="detail-item"><p><strong>Pastor(es):</strong> Luis y Sofia Vargas</p></div>
                    <div class="detail-item"><p><strong>Dirección:</strong> Diagonal 45 #2-10, La Libertad</p></div>
                    <div class="detail-item"><p><strong>Ciudad:</strong> Cúcuta</p></div>
                    <div class="detail-item"><p><strong>Teléfono:</strong> +57 301 000 1122</p></div>
                    <div class="detail-item"><p><strong>Sitio web:</strong> <a href="https://www.ejemplo.com/libertad" target="_blank">www.ejemplo.com/libertad</a></p></div>
                    <div class="map-embed">
                        <iframe src="https://www.google.com/maps/embed/v1/place?q=place_id:ChIJFcp6RrFaZo4RN5urHNBp-sA&key=YOUR_Maps_API_KEY" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>

                <div class="church-details" data-id="prados">
                    <h3 class="church-name">Centro Cristiano Prados del Este</h3>
                    <div class="detail-item"><p><strong>Pastor(es):</strong> Miguel y Laura Blanco</p></div>
                    <div class="detail-item"><p><strong>Dirección:</strong> Carrera 1 Este #10-25, Prados del Este</p></div>
                    <div class="detail-item"><p><strong>Ciudad:</strong> Cúcuta</p></div>
                    <div class="detail-item"><p><strong>Teléfono:</strong> +57 305 333 4455</p></div>
                    <div class="detail-item"><p><strong>Sitio web:</strong> <a href="https://www.ejemplo.com/prados" target="_blank">www.ejemplo.com/prados</a></p></div>
                    <div class="map-embed">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3950.40726715053!2d-72.50201942468749!3d7.979051892033405!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e6645373a0a38b1%3A0x6b3b2b800c14b7e!2sBarrio%20aeropuerto%20Porvenir%2C%20Cl.%2014%20%231-116%2C%20Barrio%20El%20Porvenir%20Bajo%2C%20C%C3%BAcuta%2C%20Norte%20de%20Santander!5e0!3m2!1ses-419!2sco!4v1701388800000!5m2!1ses-419!2sco" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>

                <div class="church-details" data-id="sanmartin">
                    <h3 class="church-name">Centro Cristiano San Martín</h3>
                    <div class="detail-item"><p><strong>Pastor(es):</strong> Roberto y Carmen Soto</p></div>
                    <div class="detail-item"><p><strong>Dirección:</strong> Calle 10 #1-50, San Martín</p></div>
                    <div class="detail-item"><p><strong>Ciudad:</strong> Cúcuta</p></div>
                    <div class="detail-item"><p><strong>Teléfono:</strong> +57 300 666 7788</p></div>
                    <div class="detail-item"><p><strong>Sitio web:</strong> <a href="https://www.ejemplo.com/sanmartin" target="_blank">www.ejemplo.com/sanmartin</a></p></div>
                    <div class="map-embed">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1dYOUR_MAP_EMBED_CODE_FOR_LOS_PINOS!2d-72.5!3d7.9!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zYOUR_PLACE_NAME!5e0!3m2!1ses-419!2sco!4v1701388800000!5m2!1ses-419!2sco" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>

                <div class="church-details" data-id="tucunare">
                    <h3 class="church-name">Centro Cristiano Tucunaré</h3>
                    <div class="detail-item"><p><strong>Pastor(es):</strong> Ricardo y Elena Castro</p></div>
                    <div class="detail-item"><p><strong>Dirección:</strong> Manzana K, Lote 1, Tucunaré</p></div>
                    <div class="detail-item"><p><strong>Ciudad:</strong> Cúcuta</p></div>
                    <div class="detail-item"><p><strong>Teléfono:</strong> +57 314 999 0011</p></div>
                    <div class="detail-item"><p><strong>Sitio web:</strong> <a href="https://www.ejemplo.com/tucunare" target="_blank">www.ejemplo.com/tucunare</a></p></div>
                    <div class="map-embed">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1dYOUR_MAP_EMBED_CODE_FOR_ATALAYA!2d-72.6!3d7.8!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zYOUR_PLACE_NAME!5e0!3m2!1ses-419!2sco!4v1701388800000!5m2!1ses-419!2sco" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>

                 <div class="church-details" data-id="vallesther">
                    <h3 class="church-name">Centro Cristiano Vallesther</h3>
                    <div class="detail-item"><p><strong>Pastor(es):</strong> Gabriel y Paola Días</p></div>
                    <div class="detail-item"><p><strong>Dirección:</strong> Calle 5 #50-10, Vallesther</p></div>
                    <div class="detail-item"><p><strong>Ciudad:</strong> Cúcuta</p></div>
                    <div class="detail-item"><p><strong>Teléfono:</strong> +57 311 222 3344</p></div>
                    <div class="detail-item"><p><strong>Sitio web:</strong> <a href="https://www.ejemplo.com/vallesther" target="_blank">www.ejemplo.com/vallesther</a></p></div>
                    <div class="map-embed">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3950.5966453965646!2d-72.50294968846175!3d7.98905329193231!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e6644f6f4d8e5b5%3A0xc3f12e8c2d1b7b0a!2sIglesia%20Centro%20Cristiano%20Aeropuerto%20Asambleas%20de%20Dios!5e0!3m2!1ses!2sco!4v1701048000000!5m2!1ses!2sco" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>

                </div>
        </div>
    </div>

<script>
    // La función global para abrir el modal debe estar fuera de DOMContentLoaded
    // para que pueda ser accedida y llamada inmediatamente desde el script de index.html
    window.openChurchModal = function() {
        console.log("popup.html: Función 'openChurchModal' llamada desde el exterior.");
        const churchModal = document.getElementById('churchModal');
        if (churchModal) {
            churchModal.style.display = 'flex'; // Hace visible el modal
            console.log(`popup.html: 'churchModal' display establecido a: ${churchModal.style.display}`);
            
            // Re-inicializar el selector y ocultar todas las sedes al abrir para un estado limpio
            const sedeSelector = document.getElementById('sede-selector');
            const churchesContainer = document.getElementById('churches-container');
            if (sedeSelector && churchesContainer) {
                 initializeSedeSelector(); // Llama a la función para rellenar el selector
                 churchesContainer.querySelectorAll('.church-details').forEach(el => el.classList.remove('active')); // Oculta todos los detalles de sede
                 console.log("popup.html: Selector y sedes reseteados al abrir.");
            } else {
                 console.warn("popup.html ADVERTENCIA: Elementos del selector/contenedor no encontrados al abrir el modal.");
            }
        } else {
            console.error("popup.html ERROR: #churchModal no se encontró al intentar abrir el modal.");
        }
    };

    // Todo lo demás, incluyendo la lógica interna del popup y sus event listeners,
    // se puede ejecutar de forma segura una vez que el DOM del popup esté cargado.
    document.addEventListener('DOMContentLoaded', function() {
        console.log("popup.html: DOMContentLoaded - Script del popup cargado.");

        const churchModal = document.getElementById('churchModal');
        const closeModalButton = churchModal ? churchModal.querySelector('.close-button') : null;
        const sedeSelector = document.getElementById('sede-selector');
        const churchesContainer = document.getElementById('churches-container');
        // Validaciones iniciales para elementos del popup (útil para depuración)
        if (!churchModal) {
            console.error("popup.html ERROR: No se encontró '#churchModal'. El modal podría no funcionar.");
            return; 
        }
        if (!closeModalButton) {
            console.warn("popup.html ADVERTENCIA: No se encontró el botón de cierre '.close-button'.");
        }
        if (!sedeSelector) {
            console.error("popup.html ERROR: No se encontró el selector de sede '#sede-selector'.");
        }
        if (!churchesContainer) {
            console.error("popup.html ERROR: No se encontró el contenedor de iglesias '#churches-container'.");
        }
        console.log("popup.html: Elementos principales del modal encontrados.");

        // Datos de las sedes. AJUSTA ESTA LISTA y los data-id en el HTML para que coincidan.
        const sedes = [
            { id: 'aeropuerto', name: 'Centro Cristiano Aeropuerto' },
            { id: 'atalaya', name: 'Centro Cristiano Atalaya' },
            { id: 'belen', name: 'Centro Cristiano Belén' },
            { id: 'colinas', name: 'Centro Cristiano Colinas' },
            { id: 'donanidia', name: 'Centro Cristiano Doña Nidia' },
            { id: 'libertad', name: 'Centro Cristiano Libertad' },
            { id: 'lospinos', name: 'Centro Cristiano Los Pinos' },
            { id: 'prados', name: 'Centro Cristiano Prados del Este' },
            { id: 'sanmartin', name: 'Centro Cristiano San Martín' },
            { id: 'tucunare', name: 'Centro Cristiano Tucunaré' },
            { id: 'vallesther', name: 'Centro Cristiano Vallesther' }
        ].sort((a, b) => a.name.localeCompare(b.name)); // Ordenar alfabéticamente para el dropdown

        // Función para rellenar el selector de sedes
        // Se declara aquí para que initializeSedeSelector() pueda ser llamada desde window.openChurchModal
        // y también dentro de este DOMContentLoaded si fuera necesario (aunque ya no lo es aquí).
        window.initializeSedeSelector = function() { // Hacemos esta función global también por si acaso
            console.log("popup.html: Inicializando selector de sedes...");
            if (sedeSelector) {
                sedeSelector.innerHTML = ''; // Limpiar opciones existentes

                const defaultOption = document.createElement('option');
                defaultOption.value = '';
                defaultOption.textContent = 'Selecciona una Sede...';
                defaultOption.disabled = true;
                defaultOption.selected = true;
                sedeSelector.appendChild(defaultOption);

                sedes.forEach(sede => {
                    const option = document.createElement('option');
                    option.value = sede.id;
                    option.textContent = sede.name;
                    sedeSelector.appendChild(option);
                });
                console.log("popup.html: Selector de sedes rellenado.");
            }
        };

        // Función para mostrar la sede seleccionada
        function showSelectedSede() {
            const selectedId = sedeSelector.value;
            console.log(`popup.html: Sede seleccionada en el dropdown: ${selectedId}`);
            
            const churchDetailsElements = churchesContainer ? churchesContainer.querySelectorAll('.church-details') : [];
            churchDetailsElements.forEach(churchElement => {
                if (churchElement.getAttribute('data-id') === selectedId) {
                    churchElement.classList.add('active'); // Muestra la sede seleccionada
                    console.log(`popup.html: Mostrando detalles de la sede: ${selectedId}`);
                } else {
                    churchElement.classList.remove('active'); // Oculta las demás
                }
            });
        }

        // --- Event Listeners del modal ---
        if (closeModalButton) {
            closeModalButton.addEventListener('click', function() {
                churchModal.style.display = 'none';
                console.log("popup.html: Modal cerrado por clic en botón 'x'.");
            });
        }

        if (churchModal) { 
            churchModal.addEventListener('click', function(event) {
                if (event.target === churchModal) { // Solo si el clic es en el overlay y no en el contenido
                    churchModal.style.display = 'none';
                    console.log("popup.html: Modal cerrado por clic en el overlay.");
                }
            });
        }

        if (sedeSelector) {
            sedeSelector.addEventListener('change', showSelectedSede);
        }

        // Ya no llamamos initializeSedeSelector() aquí porque se hace desde window.openChurchModal() al abrir.
        // initializeSedeSelector(); 
    });
</script>
</body>
</html>
